# 01工作区和GOPATH
安装go后需要配置3个环境变量：

GOROOT：go语言安装根目录

GOPATH：若干工作区目录的路径（自定义的工作区间，核心）

GOBIN：go程序生成的可执行文件的路径（windows的exe）

GOPATH可以设置多个，go语言项目在其生命周期内所有操作（编码、依赖管理、构建、测试、安装）基本上都是围绕GOPATH和工作区进行的。

提及了3个知识点：
## 1、go语言源码的组织方式：
go语言源码的组织方式是以环境变量GOPATH、工作区、src目录和代码包为主线的。
**import ("代码包的导入路径")//src目录下的子目录**

## 2、了解源码安装后的结果：
如果安装后产生了归档文件（fileName.a），会放进该工作区的pkg子目录。如果产生了可执行文件，会放进该工作区的bin子目录
**go install github.com/labstack/echo**

生成的可执行文件所在目录是pkg/windows_amd64/github.com/labstack，文件名是echo.a

windows_amd64代表操作系统是windows，计算机架构是64位

## 3、理解构建和安装go程序的过程（这里记下来的多，因为这一点应该是重点要理解的）
构建：go build，安装：go install
**构建和安装代码包的时候都会执行编译、打包等操作，而且，这些操作生产的任何文件都会先被保存到某个临时的目录中。**

如果构建的是库源码文件，那么操作后产生的结果文件只会存在于临时目录中。（构建的主要意义在于检查和验证）

如果构建的是命令源码文件，那么操作的结果文件会搬运到源码文件所在的目录中。

如果安装的是库源码文件，那么结果文件会搬运到它所在的工作区的pkg目录下的某个子目录中。

如果安装的是命令源码文件，那么结果文件会被搬运到它所在的工作区的bin目录中，或者环境变量GOBIN指向的目录中。

（库源码好理解，命令源码就是自己平时写代码创建的文件）

**疑问：怎么知道自己要build/install的文件是一个库源码文件还是命令源码文件呢？**

**以后回看的时候解决上面的问题。**

通过以上可以看出，build一般是用于验证，install一般是生成结果。

## 补充阅读：
运行go build命令时，牧人不编译目标代码包所依赖的代码包。如果以来的代码包归档文件不存在，或者源码文件有了变化，那它还是会被编译

//如果要强制编译它们，可以在执行命令的时候加入标记-a

//如果不但要编译依赖的代码包，还要安装它们的归档文件，那么可以加入标记-i。

//运行go build命令时加入标记-x，这样可以看到go build命令具体都执行了哪些操作。另外也可以加入标记-n，这样可以只查看具体操作而不执行它们。

//运行go build命令时加入标记-v，这样可以看到go build命令编译的代码包的名称。它在与-a标记搭配使用时很有用。


go get会自动从一些主流公用代码仓库（如github）下载目标代码包，并把他们安装到环境变量GOPATH包含的·第一工作区·的相应目录中。

如果存在环境变量GOBIN，那么仅包括命令源码文件的代码包会被安装到GOBIN指向的目录

//-u：下载并安装代码包，不论工作区中是否已存在它们。

//-d：只下载代码包，不安装代码包。

//-fix：在下载代码包后先运行一个用于根据当前 Go 语言版本修正代码的工具，然后再安装代码包

//-t：同时下载测试所需的代码包。

//-insecure：允许通过非安全的网络协议下载和安装代码包。HTTP就是这样的协议全的网络协议


自定义代码包·远程·导入路径：

代码包原本的完整导入路径是github.com/golang/sync/semaphors（也就是github上提供的golang的库文件）

package semaphor//import "golang.org/x/sync/semaphors"

与golang官网提供的目录地址对应上了，就可以不用翻墙去golang官网下载相应代码包，而通过github下载


参考链接: https://time.geekbang.org/column/article/12959#previewimg
